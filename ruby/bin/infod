#!/usr/bin/env ruby

case ARGV[0]

when 'apache'
  ENV['apache']='y'
  ARGV.shift

when /^(lo|local)$/
  ARGV.push *%w{-p 80 -a 127.0.0.1}
  ARGV.shift

when 'nginx'
  ENV['nginx']='y'
  ARGV.shift

else
  ARGV.push *%w{-p 80}

end
ARGV.push *%w{--threaded start}

%w{infod thin}.map{|l| require l}

Thin::Runner.new(ARGV).run!
